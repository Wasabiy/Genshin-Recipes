# Documentation - Genshin Recipes
Group 30: IT2810
## Choice of API
The choice of API was
[Genshin API ](https://genshin.jmp.blue/),
as this was a passion project of our interests.
However the API itself is poorly constructed and has many faults. When fetching data, there is no way of only choosing one single API Object, as the response is a single Object containing many other objects. This forced us to get everything in one API call.
A glaring issue was the lack of arrays and relation between pictures and key names. Sometimes a name would not correspond to the right image, either returning nothing, or having an obscure key to fetch the singular picture. 
Furthermore, at the end of every call was an empty key with a simple string, containg no information. 

## Dependencies
The main dependencies used were as followed:

| Name                 | Version | 
|----------------------|---------|
| Node                 | 22.6.0  |
| npm                  | 10.4.0  |
| Eslint               | 9.10.0  |
| TypeScript-Eslint    | 8.4.0   |
| Vitest               | 2.1.1   |
| Jest                 | 29.6.13 |
| Vite                 | 5.4.6   |
| ViteJs               | 4.3.1   |
| Tanstack React Query | 5.55.0  |
| React-Dom            | 18.3.1  |
| React-Router-Dom     | 6.26.2  |
| Prettier             | 3.3.3   |

#### Prettier
Prettier was used for reformatting code and ensuring a standardized way of writing, with the config.
The group decided the project example for the [Prettier Config](.prettierrc), was a good standard to follow.
#### Eslint 
Eslint was implemented as a highlighter against, errors, weaknesses and warnings.
Eslint ensured that the `npm run build`, would almost certainly run without fault.
#### TansTack React Query 
Tanstack was the bridge between the API and our project, allowing us to cache, load and render data in a speedy manner.
We avoided using Axios, as the data could not be cached as easily, and would use more time when the filtration re-rendered the items.
#### Vite/ViteJs
Testing framework with support for various browsers and tools.
It was our build for developing React applications, and alongside TypeScript it was the main configured environment the group had developed the project within.
#### Vitest/Jest
Vitest is the Vite-native testing framework.
Jest is a TypeScript/JavaScript testing framework allowing for snapshot comparison, mocking and test coverage. 

#### React-Router & React-Dom


## Project Setup
The project was generated with 
`npm create vite@latest prosjekt1 -- --template react-ts`
we used the template and expanded on it further.
    The folder structure is as follows:
- src 
- [App.tsx](src/App.tsx)
- [Main.tsx](src/Main.tsx)
- - [assets](src/assets)
- - [components](src/components)
- - [models](src/models/)
- - [pages](src/pages/)
- - [tests](src/tests)
- - - [mock](src/tests/mock/)
- - [utils](src/utils)

#### App.tsx
This file was generated by the command described above to create a project with TypeScript and Vite. It contains the routing of the project.

#### Main.tsx
This file contains App.tsx within a React BrowserRouter.

#### src/assets
[src/assets](src/assets) contains all image files that was used for the project, as well as a single .mp4-file used for [HomePage.tsx](src/pages/HomePage.tsx).

#### src/components
[src/components](src/components) contains all components that was used strictly for rendering within pages.
- [RecipeCard.tsx](src/components/RecipeCard.tsx): A component that takes in an object of type [KeyFood](src/models/interface.ts) and a string that is used as an URL to fetch images from. It has a singular state called "isLiked", which will change when the favorite button of the component is clicked. When the component itself is clicked, it will navigate to [RecipeInfoPage.tsx](src/pages/RecipeInfoPage.tsx). It has one singular [.css-file](src/style/components/RecipeCard.css)

- [Navbar.tsx](src/components/Navbar.tsx): The navigation bar that all .tsx-files (excluding .test.tsx-files) in the project share. It is placed in [App.tsx](src/App.tsx). The navigation bar can navigate to [HomePage.tsx](src/pages/HomePage.tsx), [RecipesPage.tsx](src/pages/RecipesPage.tsx), [FavoritesPage.tsx](src/pages/FavoritesPage.tsx), and [AboutPage.tsx](src/pages/AboutPage.tsx). It has one singular [.css-file](src/style/components/Navbar.css) 

#### src/models
[src/models](src/models/) contains one .ts-file for modelling the API response data.
- [interface.ts](src/models/interface.ts) reformats API response data into customized objects, to use in the project.

#### src/pages
[src/pages](src/pages/) contains all .tsx-files that are pages in the project.

### src/pages/AboutPage
- [AboutPage.tsx](src/pages/AboutPage.tsx) contains the about page for the website. Some information about the website should show up in a section. There is also a link to the projects api(https://genshin.jmp.blue/materials/cooking-ingredients/). React-router-dom was used with [Navbar.tsx](src/components/Navbar.tsx)  to navigate to this page. 

- [FavoritesPage.tsx](src/pages/FavoritesPage.tsx) contains the page where favorites get displayed. This is done with localStorage, where previously favorited recipes are stored. FavoritesPage.tsx fetches the data from localStorage to display the favorited. React-router-dom was used with [Navbar.tsx](src/components/Navbar.tsx)  to navigate to this page.

- [HomePage.tsx](src/pages/HomePage.tsx) contains the page where users by default start at with React-router-dom. Homepage displays a text-value which will take user to [RecipesPage.tsx](src/pages/RecipesPage.tsx). React-router-dom was used with [Navbar.tsx](src/components/Navbar.tsx)  to navigate to this page.

- [RecipeInfoPage.tsx](src/pages/RecipeInfoPage.tsx) contains information fetched from api(https://genshin.jmp.blue/materials/cooking-ingredients/). Both [FavoritesPage.tsx](src/pages/FavoritesPage.tsx) and [RecipesPage.tsx](src/pages/RecipesPage.tsx) lead to this page.

- [RecipesPage.tsx](src/pages/RecipesPage.tsx) contains the page which displays all the recipes from the api(https://genshin.jmp.blue/materials/cooking-ingredients/). React-router-dom was used with [Navbar.tsx](src/components/Navbar.tsx)  to navigate to this page. This website contains functions for fetching all needed data and filtering data, while keeping filter-states in sessionStorage. 

#### src/tests
- - [mock](src/tests/mock/)
- - Mock sets mock connection with API via. Mock service worker
- [FavoritesPage.test.tsx](src/tests/FavoritesPage.test.tsx)
- - Snapshot test, checks if the page was rendered complete
- [NavBar.test.tsx](src/tests/NavBar.test.tsx)
- - Snapshot test of NavBar.tsx, as well as testing if the Link/Routing from one page to another is successful
- [RecipeCard.test.tsx](src/tests/RecipeCard.test.tsx)
- - Snapshot test as well as generating a Mock KeyFood Object and renders it as a RecipeCard.tsx component, and checks if it was renderd correctly with the right values
- [RecipesPage.test.tsx](src/tests/RecipesPage.test.tsx)
- - Snapshot test to see if RecipePage was rendered correctly.

#### src/utils
- [apiCalls.ts](src/utils/apiCalls.ts)
- - The utility file for all API calls, fetches the data asynchronously and allows you to use them in queryFunctions
- [globalFunctions.ts](src/utils/globalFunctions.ts)
- - Globally used function unrelated to API fetch calls, includes formatting data into different interface array types, basde on inputted values.


#### The Website:
http://it2810-30.idi.ntnu.no/project1/

